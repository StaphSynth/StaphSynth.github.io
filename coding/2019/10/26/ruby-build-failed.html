<!DOCTYPE html> <html> <head> <meta charset="utf-8"/> <meta name="viewport" content="width=device-width, initial-scale=1"/> <title> OpenSSL and Ruby build failures | Syntheta.se </title> <script type="text/javascript" src="https://use.fontawesome.com/0523816ffe.js"></script> <link rel="alternate" type="application/rss+xml" title="Syntheta.se RSS" href="/feed.xml"/> <link type="text/css" rel="stylesheet" href="/assets/css/main.css"/> <link type="text/css" rel="stylesheet" href="/assets/css/syntax.css"/> <link rel="icon" type="image/png" href="/assets/images/favicon-32x32.png" sizes="32x32"/> <link rel="icon" type="image/png" href="/assets/images/favicon-16x16.png" sizes="16x16"/> <meta name="generator" content="Jekyll v4.3.1"/> <meta property="og:title" content="OpenSSL and Ruby build failures"/> <meta name="author" content="David Allen"/> <meta property="og:locale" content="en_US"/> <meta name="description" content="I came across the following error while trying to install an old version of Ruby recently:"/> <meta property="og:description" content="I came across the following error while trying to install an old version of Ruby recently:"/> <link rel="canonical" href="https://syntheta.se/coding/2019/10/26/ruby-build-failed.html"/> <meta property="og:url" content="https://syntheta.se/coding/2019/10/26/ruby-build-failed.html"/> <meta property="og:site_name" content="Syntheta.se"/> <meta property="og:type" content="article"/> <meta property="article:published_time" content="2019-10-26T00:00:00+00:00"/> <meta name="twitter:card" content="summary"/> <meta property="twitter:title" content="OpenSSL and Ruby build failures"/> <script type="application/ld+json">
{"@context":"https://schema.org","@type":"BlogPosting","author":{"@type":"Person","name":"David Allen"},"dateModified":"2019-10-26T00:00:00+00:00","datePublished":"2019-10-26T00:00:00+00:00","description":"I came across the following error while trying to install an old version of Ruby recently:","headline":"OpenSSL and Ruby build failures","mainEntityOfPage":{"@type":"WebPage","@id":"https://syntheta.se/coding/2019/10/26/ruby-build-failed.html"},"url":"https://syntheta.se/coding/2019/10/26/ruby-build-failed.html"}</script> </head> <body> <div id="page-wrapper"> <header> <noscript> <div id="noscript"> JavaScript is turned off. Please <a href="https://enable-javascript.com/" target="_blank"> enable JavaScript </a> for full use of this site. </div> </noscript> <div id="masthead"> <div id="heading"> <a href="/"> <h1>Synthetase's World of Nerd</h1> </a> </div> </div> <nav id="main-menu"> <button id="nav-icon" type="button"> <i class="fa fa-bars"></i> <i class="fa fa-caret-down" aria-hidden="true"></i> </button> <ul> <li> <a href="/"> Home </a> </li> <li> <a href="/coding/" class="selected"> Coding </a> </li> <li> <a href="/projects/"> Projects </a> </li> <li> <a href="/about/"> About </a> </li> </ul> </nav> </header> <div id="content-wrapper"> <section id="article"> <div class="article-header"> <div class="title-section"> <div class="thumb-container"> <img src="/assets/images/logos/ruby.jpg" alt="" aria-hidden="true"/> </div> <div class="post-title"> <h2>OpenSSL and Ruby build failures</h2> </div> </div> <ul class="post-data"> <li> <p> <i class="fa fa-calendar" aria-hidden="false" title="First published"></i><noscript>First published</noscript> 26 October 2019&ensp;|&ensp; </p> </li> <li> <p> <i class="fa fa-tags" aria-hidden="false" title="Tags"></i><noscript>Tags</noscript> <a href="/tags/#ruby">ruby</a>. </p> </li> </ul> </div> <p>I came across the following error while trying to install an old version of Ruby recently:</p> <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>BUILD FAILED (LinuxMint 19.2 using ruby-build 20191004)

Inspect or clean up the working tree at /tmp/ruby-build.20191026120032.31339
Results logged to /tmp/ruby-build.20191026120032.31339.log

Last 10 log lines:
installing default psych libraries
linking shared-object date_core.so
make[2]: Leaving directory '/tmp/ruby-build.20191026120032.31339/ruby-2.3.1/ext/date'
linking shared-object nkf.so
make[2]: Leaving directory '/tmp/ruby-build.20191026120032.31339/ruby-2.3.1/ext/nkf'
linking shared-object psych.so
make[2]: Leaving directory '/tmp/ruby-build.20191026120032.31339/ruby-2.3.1/ext/psych'
make[1]: Leaving directory '/tmp/ruby-build.20191026120032.31339/ruby-2.3.1'
uncommon.mk:203: recipe for target 'build-ext' failed
make: *** [build-ext] Error 2
</code></pre></div></div> <p>After doing a <a href="https://github.com/rbenv/ruby-build/issues/1199">bit</a> of <a href="https://github.com/rbenv/ruby-build/wiki#openssl-usrincludeopensslasn1_mach102-error-error-this-file-is-obsolete-please-update-your-software">research</a>, it turns out that older Ruby versions are incompatible with the current version of <code class="language-plaintext highlighter-rouge">libssl</code> and it needs to be downgraded. The opposite occurs for anyone trying to install a recent version of Ruby with an older version of libssl.</p> <h3 id="the-solution">The Solution</h3> <p>If you’re trying to install Ruby &lt;= 2.3, you need to install version one of the library. For Debian/Ubuntu-based machines:</p> <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>$ sudo apt install libssl1.0-dev
</code></pre></div></div> <p>If you’re trying to install Ruby &gt;= 2.4, update the library to the latest version:</p> <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>$ sudo apt update
$ sudo apt install libssl-dev
</code></pre></div></div> </section> </div> <footer> <div id=footer-container> <section id="connect"> <p>Connect with me:</p> <ul> <li> <a href="https://github.com/StaphSynth" target="_blank"> <i class="fa fa-github-square social" aria-hidden="false"></i> </a> </li> <li> <a href="https://www.linkedin.com/in/david-allen-102290119/" data-proofer-ignore target="_blank"> <i class="fa fa-linkedin-square social" aria-hidden="false"></i> </a> </li> <li> <a href="https://syntheta.se/feed.xml"> <i class="fa fa-rss-square social" aria-hidden="false"></i> </a> </li> </ul> </section> <section id="licence"> <ul> <li id="ccLogo"> <a rel="license" href="https://creativecommons.org/licenses/by-sa/4.0/" target="_blank"> <img src="https://syntheta.se/assets/images/cc.png" alt="Creative commons logo"/> </a> </li> <li>This site is licensed under a Creative Commons <a rel="license" href="https://creativecommons.org/licenses/by-sa/4.0/" target="_blank"> Attribution-ShareAlike </a> 4.0 International Licence. </li> </ul> </section> </div> </footer> </div> </body> <script type="text/javascript">!function(){function t(){["https://code.jquery.com/jquery-1.11.0.min.js","https://syntheta.se/assets/javascript/synth.js"].forEach(t=>{const e=document.createElement("script");e.src=t,e.type="text/javascript",e.async=!1,document.body.appendChild(e)})}window.addEventListener("load",t,!1)}();</script> </html>